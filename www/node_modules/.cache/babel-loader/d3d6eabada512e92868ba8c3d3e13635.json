{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/gamecoach/codes/portfolio-2019q2/www/components/editStack.js\";\nimport React from \"react\";\nimport { withRouter } from 'next/router';\nimport { Formik, FieldArray, Field } from 'formik';\nimport { connect } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport { TextField } from 'formik-material-ui';\nimport { asyncGetStacks, setStacks, setStack } from '../actions/info';\nimport FileUpload from './fileUpload';\n\nvar renderStacks = function renderStacks(aryHelper) {\n  console.log(aryHelper);\n  var remove = aryHelper.remove,\n      push = aryHelper.push,\n      form = aryHelper.form;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, form.values.stacks.map(function (stack, index) {\n    return React.createElement(\"div\", {\n      key: index,\n      className: \"stack-element--form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"stacks[\".concat(index, \"].name\"),\n      component: TextField,\n      label: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18\n      },\n      __self: this\n    }), React.createElement(Field, {\n      name: \"stacks[\".concat(index, \"].desc\"),\n      component: \"textarea\",\n      label: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }, \"icon\"), React.createElement(FileUpload, {\n      name: \"stacks[\".concat(index, \"].icon\"),\n      form: form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    })), React.createElement(Button, {\n      onClick: function onClick() {\n        return remove(index);\n      },\n      color: \"primary\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    }, \"-\"));\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return push({\n        name: '',\n        desc: '',\n        icon: null\n      });\n    },\n    color: \"primary\",\n    variant: \"contained\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, \"+\"));\n};\n\nvar EditStack = function EditStack(_ref) {\n  var stacks = _ref.info.stacks,\n      dispatch = _ref.dispatch,\n      router = _ref.router;\n  useEffect(function () {\n    dispatch(asyncGetStacks(router));\n  }, []); // on mount\n\n  var createStack = function createStack(e) {\n    e.preventDefault();\n    var defaultStack = {\n      name: 'noname',\n      desc: 'nodesc',\n      icon: null\n    };\n    defaultStack.id = stacks.length;\n    dispatch(setStacks([].concat(_toConsumableArray(stacks), [defaultStack])));\n  };\n\n  var saveStack = function saveStack(e) {\n    e.preventDefault(); // TODO\n  };\n\n  var submitStacks = function submitStacks(props, _ref2) {\n    var setSubmitting = _ref2.setSubmitting;\n    // console.log('submitting', props.stacks);\n    setSubmitting(false);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    initialValues: {\n      stacks: stacks\n    },\n    onSubmit: submitStacks,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, function (_ref3) {\n    var handleSubmit = _ref3.handleSubmit;\n    return React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"page--admin-stack--form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(FieldArray, {\n      name: \"stacks\",\n      render: renderStacks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      color: \"primary\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"save current stacks\"));\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(withRouter(EditStack));","map":{"version":3,"sources":["/Users/gamecoach/codes/portfolio-2019q2/www/components/editStack.js"],"names":["withRouter","Formik","FieldArray","Field","connect","useEffect","useState","Button","TextField","asyncGetStacks","setStacks","setStack","FileUpload","renderStacks","aryHelper","console","log","remove","push","form","values","stacks","map","stack","index","name","desc","icon","EditStack","info","dispatch","router","createStack","e","preventDefault","defaultStack","id","length","saveStack","submitStacks","props","setSubmitting","handleSubmit","mapStateToProps","state"],"mappings":"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","sourcesContent":["import { withRouter } from 'next/router';\nimport { Formik, FieldArray, Field } from 'formik';\nimport { connect } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport { TextField } from 'formik-material-ui';\n\nimport { asyncGetStacks, setStacks, setStack } from '../actions/info';\nimport FileUpload from './fileUpload';\n\nconst renderStacks = (aryHelper) => {\n  console.log(aryHelper);\n  const { remove, push, form } = aryHelper;\n  return (\n    <div>\n      {form.values.stacks.map((stack, index) => (\n        <div key={index} className=\"stack-element--form\">\n          <Field name={`stacks[${index}].name`} component={TextField} label=\"name\" />\n          <Field name={`stacks[${index}].desc`} component=\"textarea\" label=\"description\" />\n          <label>\n            <span>icon</span>\n            <FileUpload name={`stacks[${index}].icon`} form={form} />\n          </label>\n          <Button onClick={() => remove(index)} color=\"primary\" variant=\"contained\">\n            -\n          </Button>\n        </div>\n      ))}\n      <Button onClick={() => push({ name: '', desc: '', icon: null })} color=\"primary\" variant=\"contained\">\n        +\n      </Button>\n    </div>\n  );\n};\n\nconst EditStack = ({ info: { stacks }, dispatch, router }) => {\n  useEffect(() => {\n    dispatch(asyncGetStacks(router));\n  }, []); // on mount\n\n  const createStack = e => {\n    e.preventDefault();\n    const defaultStack = { name: 'noname', desc: 'nodesc', icon: null };\n    defaultStack.id = stacks.length;\n    dispatch(setStacks([...stacks, defaultStack]));\n  };\n\n  const saveStack = e => {\n    e.preventDefault();\n    // TODO\n  };\n\n  const submitStacks = (props, { setSubmitting }) => {\n    // console.log('submitting', props.stacks);\n    setSubmitting(false);\n  };\n\n  return (\n    <div>\n      <Formik initialValues={{ stacks }} onSubmit={submitStacks}>\n        {({ handleSubmit }) => (\n          <form onSubmit={handleSubmit} className=\"page--admin-stack--form\">\n            <FieldArray name=\"stacks\" render={renderStacks} />\n            <Button type=\"submit\" color=\"primary\" variant=\"contained\">save current stacks</Button>\n          </form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => state;\nexport default connect(mapStateToProps)(withRouter(EditStack));\n"]},"metadata":{},"sourceType":"module"}